<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AL Manager - Host Dashboard</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Fontes Premium: Rajdhani (Tech/Gamer) & Inter (Clean UI) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Rajdhani:wght@500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #ff4d4d;
            --primary-glow: rgba(255, 77, 77, 0.5);
            --success: #00ff9d;
            --success-glow: rgba(0, 255, 157, 0.4);
            --bg-dark: #050505;
            --surface: rgba(20, 20, 20, 0.7);
            --glass-border: rgba(255, 255, 255, 0.08);
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            color: #e5e5e5;
            overflow: hidden;
        }

        /* --- Tipografia --- */
        h1, h2, h3, h4, .font-tech {
            font-family: 'Rajdhani', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* --- Background Effects --- */
        .cyber-grid {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 40px 40px;
            z-index: -2;
            mask-image: radial-gradient(circle at center, black 40%, transparent 80%);
        }

        .blob-bg {
            position: fixed;
            width: 100vw; height: 100vh;
            z-index: -1;
            filter: blur(100px);
            opacity: 0.4;
            pointer-events: none;
        }
        .orb {
            position: absolute;
            border-radius: 50%;
            animation: floatOrb 20s infinite ease-in-out;
        }
        .orb-1 { top: -10%; left: -10%; width: 50vw; height: 50vw; background: radial-gradient(circle, #7f1d1d, transparent); }
        .orb-2 { bottom: -20%; right: -10%; width: 60vw; height: 60vw; background: radial-gradient(circle, #450a0a, transparent); animation-delay: -5s; }
        
        @keyframes floatOrb {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(30px, 50px); }
        }

        /* --- Scrollbar Customizada --- */
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--primary); }

        /* --- Glassmorphism Advanced --- */
        .glass-panel {
            background: rgba(10, 10, 10, 0.7);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        .glass-panel:hover {
            border-color: rgba(255, 255, 255, 0.15);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        /* Header HUD Style */
        .hud-panel {
            background: linear-gradient(180deg, rgba(20,20,20,0.9) 0%, rgba(10,10,10,0.8) 100%);
            border-bottom: 1px solid rgba(255,255,255,0.05);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .hud-separator {
            width: 1px;
            height: 40px;
            background: linear-gradient(to bottom, transparent, rgba(255,255,255,0.1), transparent);
        }

        /* --- Inputs --- */
        .input-tech {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #fff;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }
        .input-tech:focus {
            border-color: var(--primary);
            box-shadow: 0 0 15px rgba(255, 77, 77, 0.2);
            background: rgba(0, 0, 0, 0.6);
            outline: none;
        }

        /* --- Buttons --- */
        .btn-primary {
            background: linear-gradient(135deg, #ff4d4d 0%, #cc0000 100%);
            color: white;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 20px rgba(255, 77, 77, 0.4);
        }
        .btn-primary::after {
            content: '';
            position: absolute;
            top: 0; left: -100%; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: 0.5s;
        }
        .btn-primary:hover::after { left: 100%; }

        .btn-ghost {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.05);
            color: #aaa;
            transition: all 0.2s;
        }
        .btn-ghost:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border-color: rgba(255, 255, 255, 0.2);
        }

        /* --- Animations --- */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .anim-fade-in { animation: fadeIn 0.4s ease-out forwards; }
        
        @keyframes scaleIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .anim-scale-in { animation: scaleIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; }

        .delay-100 { animation-delay: 0.1s; }
        .delay-200 { animation-delay: 0.2s; }
        .delay-300 { animation-delay: 0.3s; }

        /* Progress Bar Animation */
        @keyframes progressFill { from { width: 0; } }

        /* Status Glows */
        .glow-success { box-shadow: 0 0 30px var(--success-glow); border-color: var(--success); }
        .glow-danger { box-shadow: 0 0 30px var(--primary-glow); border-color: var(--primary); }

        /* Nav Item Active State */
        .nav-item-active {
            background: linear-gradient(90deg, rgba(255, 77, 77, 0.15) 0%, transparent 100%);
            border-left: 3px solid var(--primary);
            color: white;
            text-shadow: 0 0 10px rgba(255,77,77,0.5);
        }
        .nav-item-inactive {
            color: #888;
            border-left: 3px solid transparent;
        }
        .nav-item-inactive:hover {
            color: white;
            background: rgba(255,255,255,0.02);
            padding-left: 1rem;
        }

        .timer-glow {
            animation: pulse-red 2s infinite;
        }
        @keyframes pulse-red {
            0% { text-shadow: 0 0 5px rgba(255, 77, 77, 0.5); }
            50% { text-shadow: 0 0 15px rgba(255, 77, 77, 0.8), 0 0 5px rgba(255,255,255,0.5); }
            100% { text-shadow: 0 0 5px rgba(255, 77, 77, 0.5); }
        }
        
        /* Utility for hiding scrollbar but keeping functionality */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body>
    <div class="cyber-grid"></div>
    <div class="blob-bg">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
    </div>
    
    <div id="root" class="h-dvh w-full flex flex-col relative z-10"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Icons ---
        const Icon = ({ d, className }) => <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d={d} /></svg>;
        const Icons = {
            User: () => <Icon d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2 M12 3a4 4 0 1 0 0 8 4 4 0 0 0 0-8z" className="w-5 h-5" />,
            Shield: () => <Icon d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" className="w-5 h-5" />,
            File: () => <Icon d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z M14 2v6h6" className="w-5 h-5" />,
            Check: () => <Icon d="M20 6L9 17l-5-5" className="w-5 h-5" />,
            X: () => <Icon d="M18 6L6 18M6 6l12 12" className="w-5 h-5" />,
            Grid: () => <Icon d="M3 3h7v7H3zM14 3h7v7h-7zM14 14h7v7h-7zM3 14h7v7H3z" className="w-5 h-5" />,
            Copy: () => <Icon d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2 M16 4h2a2 2 0 0 1 2 2v4" className="w-5 h-5" />,
            Alert: () => <Icon d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0zM12 9v4M12 17h.01" className="w-5 h-5" />,
            Refresh: () => <Icon d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15" className="w-5 h-5" />,
            Info: () => <Icon d="M12 22a10 10 0 1 0 0-20 10 10 0 0 0 0 20z M12 16v-4 M12 8h.01" className="w-5 h-5" />,
            Briefcase: () => <Icon d="M20 7h-3a2 2 0 0 0-2-2h-6a2 2 0 0 0-2 2H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z" className="w-5 h-5" />,
            Clock: () => <Icon d="M12 22a10 10 0 1 0 0-20 10 10 0 0 0 0 20z M12 6v6l4 2" className="w-5 h-5" />,
            Trash: () => <Icon d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" className="w-5 h-5" />,
            BookOpen: () => <Icon d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" className="w-5 h-5" />,
            ChevronRight: () => <Icon d="M9 18l6-6-6-6" className="w-4 h-4" />
        };

        const Toast = ({ message, isVisible, onClose }) => {
            useEffect(() => {
                if (isVisible) {
                    const timer = setTimeout(onClose, 3000);
                    return () => clearTimeout(timer);
                }
            }, [isVisible, onClose]);

            if (!isVisible) return null;

            return (
                <div className="fixed top-6 left-1/2 transform -translate-x-1/2 z-[100] anim-fade-in">
                    <div className="glass-panel px-6 py-3 rounded-full flex items-center gap-3 border border-green-500/30 text-white shadow-[0_10px_40px_rgba(0,0,0,0.5)] bg-black/80">
                        <div className="bg-green-500 rounded-full p-1 text-black"><Icons.Check className="w-3 h-3" /></div>
                        <span className="font-medium text-sm">{message}</span>
                    </div>
                </div>
            );
        };

        const ProgressBar = ({ percentage, passed }) => {
            return (
                <div className="w-full mt-6">
                    <div className="flex justify-between mb-2 text-xs font-tech tracking-wider text-gray-400">
                        <span>SCORE</span>
                        <span className={passed ? "text-green-400" : "text-red-400"}>{percentage}%</span>
                    </div>
                    <div className="h-4 w-full bg-black/50 rounded-full overflow-hidden border border-white/5 relative">
                        {/* Grid lines in background */}
                        <div className="absolute inset-0 w-full h-full opacity-20" style={{backgroundImage: 'linear-gradient(90deg, transparent 95%, #fff 95%)', backgroundSize: '10% 100%'}}></div>
                        
                        <div 
                            className={`h-full relative transition-all duration-1000 ease-out ${passed ? 'bg-gradient-to-r from-emerald-600 to-[#00ff9d]' : 'bg-gradient-to-r from-red-800 to-red-500'}`}
                            style={{ width: `${percentage}%`, boxShadow: passed ? '0 0 20px #00ff9d' : '0 0 20px #ff4d4d' }}
                        >
                            <div className="absolute top-0 right-0 h-full w-1 bg-white/50 blur-[1px]"></div>
                        </div>
                    </div>
                </div>
            );
        };

        const ConfirmModal = ({ isOpen, onClose, onConfirm }) => {
            if (!isOpen) return null;
            return (
                <div className="fixed inset-0 z-[100] flex items-center justify-center bg-black/90 backdrop-blur-md anim-fade-in">
                    <div className="glass-panel p-8 rounded-2xl max-w-sm w-full text-center border-t border-red-500/50 anim-scale-in">
                        <div className="mx-auto w-16 h-16 rounded-full flex items-center justify-center mb-4 bg-red-500/10 text-red-500 border border-red-500/20">
                            <Icons.Trash className="w-8 h-8" />
                        </div>
                        <h3 className="text-xl font-bold text-white mb-2 font-tech">Nova Entrevista?</h3>
                        <p className="text-gray-400 mb-6 text-sm">Todos os dados atuais serão perdidos permanentemente.</p>
                        <div className="flex gap-3">
                            <button onClick={onClose} className="flex-1 py-3 btn-ghost rounded-xl font-medium text-sm">Cancelar</button>
                            <button onClick={onConfirm} className="flex-1 py-3 btn-primary rounded-xl font-bold text-sm shadow-lg shadow-red-500/20">Reiniciar</button>
                        </div>
                    </div>
                </div>
            );
        };

        const Dashboard = () => {
            const [activeTab, setActiveTab] = useState('instructions');
            const [candidateData, setCandidateData] = useState({ name: '', id: '', age: '', dob: '', rpTime: '', rpStyle: '', hasWlExp: null, readRules: null });
            const [answers, setAnswers] = useState({});
            const [notes, setNotes] = useState({});
            const [finalObservation, setFinalObservation] = useState('');
            const [toast, setToast] = useState({ show: false, msg: '' });
            const [showResetModal, setShowResetModal] = useState(false);
            const [questionStep, setQuestionStep] = useState(0);
            
            // Timer state
            const [isTimerRunning, setIsTimerRunning] = useState(false);
            const [timerSeconds, setTimerSeconds] = useState(0);

            useEffect(() => {
                let interval;
                if (isTimerRunning) {
                    interval = setInterval(() => {
                        setTimerSeconds(prev => prev + 1);
                    }, 1000);
                }
                return () => clearInterval(interval);
            }, [isTimerRunning]);

            const formatTime = (totalSeconds) => {
                const mins = Math.floor(totalSeconds / 60);
                const secs = totalSeconds % 60;
                return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            };

            const rpOptions = ["Ilegal", "Policia", "Restaurante", "Judiciário", "Hospital"];

            const data = {
                intro: { script: "Opa! Tranquilo? Faço parte da Equipe de Casting ta? e.. vou ser responsável pela sua entrevista hoje, beleza? vou começar com algumas perguntinhas tranquilas fechou?" },
                rules: {
                    script: "Nossa entrevista consiste em algumas perguntas, você terá 2 minutos para responder cada uma delas, a partir de agora não irei dar nenhum tipo de opinião sobre nenhuma das suas respostas. Caso não saiba responder alguma das perguntas não poderei pular para a próxima, sendo assim você é reprovado e terá mais 2 chances de realizar a entrevista novamente nos próximos horários e o próximo entrevistador irá retornar na mesma pergunta para dar continuidade.",
                    groups: [
                        { title: "Pegadinhas", items: [ { id: 'p1', text: "Qual o horário que é permitido o assalto na cidade?", answer: "Não é permitido assaltos na cidade.", type: 'trick' }, { id: 'p2', text: "Cite 2 áreas safes da nossa cidade?", answer: "Na cidade não existe área safe.", type: 'trick' } ] },
                        { title: "Gerais I (Fundamentos)", items: [ { id: 'g1', text: "O que é Power Gaming?", answer: "Power Gaming é abusar da física do jogo.\n• Cair de um prédio e sair andando;\n• Animações para bugar paredes;\n• Usar /me desmaiado;" }, { id: 'g2', text: "O que é Combat Log?", answer: "Deslogar no meio de uma ação para tentar de alguma forma se beneficiar." } ] },
                        { title: "Gerais II (Ações Proibidas)", items: [ { id: 'g3', text: "Cite 3 exemplos de Cambat Log sem F8 /quit.", answer: "1. Puxar cabo de energia;\n2. Puxar cabo de internet;\n3. Forçar crash;" }, { id: 'g4', text: "O que é VDM?", answer: "Veículo como arma.\n⚠ OBS: Não aceitar exemplos simples de atropelamento.\n• Jogar heli em pessoas;\n• Carro no posto p/ matar;\n• Carro na água p/ fugir;" } ] },
                        { title: "Gerais III (Imersão)", items: [ { id: 'g5', text: "O que é Metagaming?", answer: "Info externa para dentro do jogo.\n⚠ OBS: Não aceitar exemplos de Discord/Lives.\n• Usar 2º char p/ beneficiar 1º;\n• Reconhecer voz mascarado;\n• Foto RL no jogo;" }, { id: 'g6', text: "O que é Amor a Vida?", answer: "Valorizar a vida única.\n• Revidar 1x2 policial;\n• Revidar 1x2 bandido;\n• Desobedecer sequestrador;" } ] },
                        { title: "Gerais IV (Conduta)", items: [ { id: 'g7', text: "O que é Force-RP?", answer: "Forçar RP indesejado/desnecessário.\n• Floodar chamados;\n• Bater carro p/ brigar;\n• Inventar motivo p/ guerra;" }, { id: 'g8', text: "O que é Dark-RP?", answer: "Temas sombrios/tabus (proibido).\n⚠ OBS: Não citar preconceitos (Racismo/Homofobia).\n• Suicídio;\n• Automutilação;\n• Assédio sexual;" } ] }
                    ]
                },
                result: {
                    failScript: "Você foi reprovado, leia as nossas regras e estude mais, você terá outra chance para tentar.",
                    passScript: "Parabéns, você foi aprovado, vou estar te passando algumas orientações sobre a cidade e como você vai fazer a liberação.",
                    guidelines: [
                        { title: "Responsabilidade da Staff", text: "Você ficará sob a responsabilidade da staff por 15 dias. Qualquer infração pode resultar em perda da WL por 1 mês." },
                        { title: "Personagem", text: "Proibido char feminino apenas para vantagem em PVP. Deve haver roleplay imersivo." },
                        { title: "Nome", text: "Nome deve ser registrável em cartório. Primeiro nome obrigatório." },
                        { title: "Segurança", text: "Staff não pede telagem/call privada. Atendimento apenas no Discord principal." },
                        { title: "Atendimento", text: "Staff não atua na cidade. Dúvidas? Entre na call 'Aguardando Suporte'." },
                        { title: "Linguagem e Bom Senso", text: "Locais públicos (praça, hospital) não são safe, mas exigem bom senso. Cuidado com linguagem inadequada (streamers)." },
                        { title: "Proibido", text: "• Windows modificado.\n• MOD de som (passos, rádio).\n• MOD gráfico vantajoso (moitas claras)." },
                        { title: "Importante", text: "Salve clipe de qualquer ação por 7 dias." }
                    ]
                }
            };

            const updateCandidate = (field, value) => setCandidateData(prev => ({ ...prev, [field]: value }));
            const handleAnswer = (id, status) => setAnswers(prev => ({ ...prev, [id]: prev[id] === status ? null : status }));
            const handleNote = (id, text) => setNotes(prev => ({ ...prev, [id]: text }));

            const handleAgeChange = (val) => {
                setCandidateData(prev => {
                    const age = parseInt(val);
                    let newDob = prev.dob;
                    if (!isNaN(age) && age > 0) {
                        const birthYear = new Date().getFullYear() - age;
                        if (!newDob || newDob === '' || newDob.includes('00/00/')) newDob = `00/00/${birthYear}`;
                    }
                    return { ...prev, age: val, dob: newDob };
                });
            };

            const handleDobChange = (val) => {
                let cleanVal = val.replace(/\D/g, '');
                let formattedVal = cleanVal;
                if (cleanVal.length > 2) formattedVal = cleanVal.slice(0, 2) + '/' + cleanVal.slice(2);
                if (cleanVal.length > 4) formattedVal = formattedVal.slice(0, 5) + '/' + cleanVal.slice(4, 8);
                if (formattedVal.length > 10) formattedVal = formattedVal.slice(0, 10);

                setCandidateData(prev => {
                    let newState = { ...prev, dob: formattedVal };
                    if (formattedVal.length === 10) {
                        const parts = formattedVal.split('/');
                        const year = parseInt(parts[2], 10);
                        if (year > 1900 && year < new Date().getFullYear()) {
                            const age = new Date().getFullYear() - year;
                            newState.age = age.toString();
                        }
                    }
                    return newState;
                });
            };

            const calculateStats = () => {
                const scoreableQuestions = [...data.rules.groups[0].items.map(i => i.id), ...data.rules.groups[1].items.map(i => i.id)];
                const correct = scoreableQuestions.filter(id => answers[id] === 'approved').length;
                const incorrect = scoreableQuestions.filter(id => answers[id] === 'rejected').length;
                const total = scoreableQuestions.length;
                const score = total > 0 ? Math.round((correct / total) * 100) : 0;
                return { correct, incorrect, passed: incorrect === 0, total, score };
            };

            const handleResetConfirm = () => {
                setCandidateData({ name: '', id: '', age: '', dob: '', rpTime: '', rpStyle: '', hasWlExp: null, readRules: null });
                setAnswers({});
                setNotes({});
                setFinalObservation('');
                setQuestionStep(0); 
                setActiveTab('instructions');
                setShowResetModal(false);
                setIsTimerRunning(false);
                setTimerSeconds(0);
                setToast({ show: true, msg: 'Dashboard resetado!' });
            };

            const startInterview = () => {
                setActiveTab('intro');
                setIsTimerRunning(true);
            };

            const copyFormattedReport = () => {
                const name = candidateData.name ? candidateData.name.toUpperCase() : "NOME";
                const id = candidateData.id || "000000";
                const obs = finalObservation.trim() || "Aprovado sem ressalvas.";
                
                const text = `> **Nome:** ${name}\n> **Observação:** \` ${obs} \`\n> **ID Discord:** <@${id}> ${id}\nhttps://media.discordapp.net/attachments/1440833971654234274/1441579256634278071/image.png?ex=6926434e&is=6924f1ce&hm=b7d1316980cdef35c758879b44ffa44b862a894b378834b091d3a9931abe193c&=&format=webp&quality=lossless&width=1295&height=75`;
                
                const textArea = document.createElement("textarea");
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    setToast({ show: true, msg: 'Relatório copiado!' });
                } catch (err) { console.error(err); }
                document.body.removeChild(textArea);
            };

            const stats = calculateStats();
            const passed = stats.passed;

            return (
                <div className="flex h-full max-w-[1920px] mx-auto w-full text-sm lg:text-base">
                    {/* Sidebar */}
                    <aside className="w-16 lg:w-72 glass-panel border-r border-white/5 flex flex-col z-20 m-4 rounded-2xl overflow-hidden shrink-0">
                        <div className="p-6 flex items-center justify-center lg:justify-start gap-4 border-b border-white/5 bg-white/[0.02]">
                            <div className="w-10 h-10 bg-gradient-to-br from-red-600 to-red-900 rounded-lg flex items-center justify-center shadow-lg shadow-red-900/40 shrink-0 anim-scale-in">
                                <Icons.Shield className="w-6 h-6 text-white" />
                            </div>
                            <div className="hidden lg:block overflow-hidden anim-fade-in delay-100">
                                <h1 className="font-bold text-2xl tracking-wider text-white leading-none font-tech">HOST</h1>
                                <p className="text-[10px] text-red-500 tracking-[0.3em] uppercase font-bold mt-1">AL Manager</p>
                            </div>
                        </div>
                        
                        <nav className="flex-1 p-4 space-y-2 overflow-y-auto">
                            {[{ id: 'instructions', label: 'INSTRUÇÕES', icon: <Icons.BookOpen /> }, { id: 'intro', label: 'DADOS INICIAIS', icon: <Icons.User /> }, { id: 'rules', label: 'PERGUNTAS', icon: <Icons.File /> }, { id: 'result', label: 'FINALIZAÇÃO', icon: <Icons.Check /> }].map((item, idx) => (
                                <button 
                                    key={item.id} 
                                    onClick={() => setActiveTab(item.id)} 
                                    className={`w-full flex items-center justify-center lg:justify-start gap-4 px-0 lg:px-4 py-4 rounded-xl transition-all duration-300 relative overflow-hidden group anim-fade-in ${activeTab === item.id ? 'nav-item-active' : 'nav-item-inactive'}`} 
                                    style={{animationDelay: `${(idx+1)*0.1}s`}} 
                                    title={item.label}
                                >
                                    <span className={`shrink-0 transition-transform ${activeTab === item.id ? 'scale-110' : 'group-hover:scale-110'}`}>{item.icon}</span>
                                    <span className="hidden lg:block font-bold tracking-widest text-xs font-tech">{item.label}</span>
                                </button>
                            ))}
                        </nav>
                        
                        <div className="p-4 border-t border-white/5">
                            <button onClick={() => setShowResetModal(true)} className="btn-ghost w-full flex items-center justify-center lg:justify-start gap-3 px-0 lg:px-4 py-3 rounded-xl group" title="Resetar">
                                <span className="shrink-0 group-hover:rotate-180 transition-transform duration-500"><Icons.Refresh className="w-5 h-5"/></span>
                                <span className="hidden lg:block font-medium text-xs font-tech tracking-widest">NOVA ENTREVISTA</span>
                            </button>
                        </div>
                    </aside>

                    {/* Main Content */}
                    <main className="flex-1 flex flex-col overflow-hidden p-4 relative z-10 w-full min-w-0">
                        {/* Redesigned Header HUD - AGORA COM GRID PARA EVITAR QUEBRA */}
                        <header className="glass-panel rounded-2xl mb-6 shrink-0 w-full anim-fade-in overflow-hidden relative">
                             {/* Background tech lines */}
                            <div className="absolute inset-0 opacity-10 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCI+CjxwYXRoIGQ9Ik0wIDBoNDB2NDBIMHoiIGZpbGw9Im5vbmUiLz4KPHBhdGggZD0iTTAgNDBMMTQgMGgyNkwwIDQweiIgZmlsbD0id2hpdGUiIG9wYWNpdHk9IjAuMSIvPgo8L3N2Zz4=')]"></div>

                            <div className="flex flex-col xl:flex-row items-center justify-between p-4 md:px-6 py-4 relative z-10 gap-6">
                                
                                {/* HUD Section: Candidate Info - USANDO GRID PARA ESTABILIDADE */}
                                <div className="grid grid-cols-2 md:grid-cols-4 gap-4 w-full xl:w-auto xl:flex-1">
                                    
                                    {/* Item 1: Candidato */}
                                    <div className="flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/5 relative group">
                                        <div className="w-10 h-10 rounded-lg flex items-center justify-center bg-blue-500/10 text-blue-400 border border-blue-500/30 shrink-0">
                                            <Icons.User className="w-5 h-5"/>
                                        </div>
                                        <div className="flex flex-col min-w-0"> {/* min-w-0 needed for truncate to work in grid */}
                                            <span className="text-[10px] text-gray-500 font-bold uppercase tracking-widest font-tech">Candidato</span>
                                            <span className="text-sm md:text-base font-bold text-white truncate" title={candidateData.name}>{candidateData.name || "---"}</span>
                                        </div>
                                    </div>

                                    {/* Item 2: ID */}
                                    <div className="flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/5 relative group">
                                        <div className="w-10 h-10 rounded-lg flex items-center justify-center bg-purple-500/10 text-purple-400 border border-purple-500/30 shrink-0">
                                            <Icons.Grid className="w-5 h-5"/>
                                        </div>
                                        <div className="flex flex-col min-w-0">
                                            <span className="text-[10px] text-gray-500 font-bold uppercase tracking-widest font-tech">ID Discord</span>
                                            <span className="text-sm md:text-base font-bold text-white font-mono truncate" title={candidateData.id}>{candidateData.id || "---"}</span>
                                        </div>
                                    </div>

                                    {/* Item 3: RP Style */}
                                    <div className="flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/5 relative group">
                                         <div className="w-10 h-10 rounded-lg flex items-center justify-center bg-emerald-500/10 text-emerald-400 border border-emerald-500/30 shrink-0">
                                            <Icons.Briefcase className="w-5 h-5"/>
                                        </div>
                                        <div className="flex flex-col min-w-0">
                                            <span className="text-[10px] text-gray-500 font-bold uppercase tracking-widest font-tech">Estilo RP</span>
                                            <span className="text-sm md:text-base font-bold text-white truncate" title={candidateData.rpStyle}>{candidateData.rpStyle || "---"}</span>
                                        </div>
                                    </div>
                                    
                                    {/* Item 4: Age */}
                                    <div className="flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/5 relative group">
                                        <div className="w-10 h-10 rounded-lg flex items-center justify-center bg-orange-500/10 text-orange-400 border border-orange-500/30 shrink-0">
                                            <Icons.Clock className="w-5 h-5"/>
                                        </div>
                                        <div className="flex flex-col min-w-0">
                                            <span className="text-[10px] text-gray-500 font-bold uppercase tracking-widest font-tech">Idade</span>
                                            <span className="text-sm md:text-base font-bold text-white truncate">{candidateData.age ? candidateData.age + " anos" : "---"}</span>
                                        </div>
                                    </div>
                                </div>

                                {/* HUD Section: Timer */}
                                <div className="flex items-center gap-4 pl-0 xl:pl-6 xl:border-l border-white/10 w-full xl:w-auto justify-between xl:justify-center bg-black/20 xl:bg-transparent p-3 xl:p-0 rounded-xl xl:rounded-none border border-white/5 xl:border-0">
                                    <span className="xl:hidden text-xs font-bold text-gray-500 uppercase tracking-widest font-tech">Tempo Decorrido</span>
                                    <div className="flex items-center gap-4">
                                        <div className="text-right">
                                            <p className="hidden xl:block text-[10px] text-red-500/70 font-bold uppercase tracking-widest font-tech mb-1">Tempo Corrido</p>
                                            <div className="font-mono text-2xl font-bold tracking-widest text-red-500 timer-glow leading-none">
                                                {formatTime(timerSeconds)}
                                            </div>
                                        </div>
                                        <div className={`w-2 h-2 rounded-full ${isTimerRunning ? 'bg-red-500 animate-ping' : 'bg-gray-600'}`}></div>
                                    </div>
                                </div>
                            </div>
                        </header>

                        <div className="flex-1 overflow-y-auto pr-2 pb-20 custom-scroll">
                            <div className="max-w-6xl mx-auto w-full">
                                
                                {/* TAB: INSTRUCTIONS */}
                                {activeTab === 'instructions' && (
                                    <div className="anim-fade-in space-y-6">
                                        {/* Hero Header for Instructions */}
                                        <div className="relative glass-panel rounded-2xl p-8 overflow-hidden border-b border-white/10">
                                            <div className="absolute right-0 top-0 h-full w-1/2 bg-gradient-to-l from-red-900/20 to-transparent pointer-events-none"></div>
                                            <div className="relative z-10">
                                                <div className="flex items-center gap-3 mb-2 text-red-500">
                                                    <Icons.BookOpen className="w-6 h-6" />
                                                    <span className="font-tech text-sm tracking-[0.2em] font-bold">PROTOCOLO DE ATENDIMENTO</span>
                                                </div>
                                                <h2 className="text-4xl text-white font-bold font-tech tracking-wide mb-2">INSTRUÇÕES DA HOST</h2>
                                                <p className="text-gray-400 max-w-2xl text-sm leading-relaxed">
                                                    Siga rigorosamente as etapas abaixo para garantir a padronização e qualidade do processo seletivo.
                                                    A atenção aos detalhes é crucial para a aprovação de membros qualificados.
                                                </p>
                                            </div>
                                        </div>

                                        {/* Content Grid */}
                                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                            
                                            {/* Column 1: Procedures (Main) */}
                                            <div className="lg:col-span-2 space-y-6">
                                                <div className="glass-panel p-6 rounded-2xl border-l-4 border-yellow-500 bg-gradient-to-r from-yellow-500/5 to-transparent relative group hover:bg-yellow-500/10 transition-all duration-500">
                                                    <div className="absolute top-4 right-4 p-2 bg-yellow-500/10 rounded-lg text-yellow-500 opacity-50 group-hover:opacity-100 transition-opacity">
                                                        <Icons.Alert className="w-5 h-5" />
                                                    </div>
                                                    <h3 className="text-yellow-400 font-bold text-lg uppercase tracking-widest mb-6 font-tech flex items-center gap-2">
                                                        Procedimentos
                                                    </h3>
                                                    
                                                    <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6">
                                                        <div className="bg-[#0a0a0a]/50 p-4 rounded-xl border border-white/5">
                                                            <span className="text-[10px] text-gray-500 font-bold uppercase tracking-widest block mb-1">Entrevista</span>
                                                            <span className="text-white font-bold text-sm block mb-2">Visitante</span>
                                                            <div className="h-1 w-full bg-gray-800 rounded-full overflow-hidden"><div className="h-full bg-yellow-500 w-full"></div></div>
                                                            <span className="text-[10px] text-gray-400 mt-1 block">Realizar TODAS as fases</span>
                                                        </div>
                                                        <div className="bg-[#0a0a0a]/50 p-4 rounded-xl border border-white/5">
                                                            <span className="text-[10px] text-gray-500 font-bold uppercase tracking-widest block mb-1">Entrevista</span>
                                                            <span className="text-white font-bold text-sm block mb-2">Codiguinho</span>
                                                            <div className="h-1 w-full bg-gray-800 rounded-full overflow-hidden"><div className="h-full bg-yellow-500 w-2/3"></div></div>
                                                            <span className="text-[10px] text-gray-400 mt-1 block">Apenas 1ª e 3ª Fase</span>
                                                        </div>
                                                        <div className="bg-[#0a0a0a]/50 p-4 rounded-xl border border-white/5 sm:col-span-2">
                                                            <span className="text-[10px] text-gray-500 font-bold uppercase tracking-widest block mb-1">Entrevista</span>
                                                            <span className="text-white font-bold text-sm block mb-2">Tropa</span>
                                                            <div className="h-1 w-full bg-gray-800 rounded-full overflow-hidden"><div className="h-full bg-yellow-500 w-3/4"></div></div>
                                                            <span className="text-[10px] text-gray-400 mt-1 block">1ª Fase, 3ª Fase e Documento</span>
                                                        </div>
                                                    </div>

                                                    <div className="space-y-3">
                                                        <div className="flex items-center gap-3 text-sm text-gray-300 bg-white/5 p-3 rounded-lg border border-white/5">
                                                            <div className="w-1.5 h-1.5 bg-yellow-500 rounded-full shadow-[0_0_10px_orange]"></div>
                                                            Verifique se o Discord tem <strong>mais de 4 meses</strong>.
                                                        </div>
                                                        <div className="flex items-center gap-3 text-sm text-gray-300 bg-white/5 p-3 rounded-lg border border-white/5">
                                                             <div className="w-1.5 h-1.5 bg-yellow-500 rounded-full shadow-[0_0_10px_orange]"></div>
                                                             Verifique histórico de reprovação.
                                                        </div>
                                                        <div className="flex items-center gap-3 text-sm text-red-200 bg-red-500/10 p-3 rounded-lg border border-red-500/20">
                                                             <div className="w-1.5 h-1.5 bg-red-500 rounded-full shadow-[0_0_10px_red]"></div>
                                                             <span className="font-bold">Sempre grave a tela durante a entrevista.</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            {/* Column 2: Assessment & Actions */}
                                            <div className="space-y-6 flex flex-col">
                                                {/* Eval Card */}
                                                <div className="glass-panel p-6 rounded-2xl border-t-4 border-red-500 hover:border-red-400 transition-colors flex-1">
                                                    <h3 className="text-red-400 font-bold text-sm uppercase tracking-widest mb-4 flex items-center gap-2 font-tech">
                                                        <Icons.User className="w-4 h-4"/> Critérios de Avaliação
                                                    </h3>
                                                    <ul className="space-y-4">
                                                        <li className="flex gap-3 text-sm text-gray-400 group">
                                                            <span className="text-red-500/50 group-hover:text-red-500 font-tech">01</span>
                                                            <span>Anote nome, ID e observações relevantes.</span>
                                                        </li>
                                                        <li className="flex gap-3 text-sm text-gray-400 group">
                                                            <span className="text-red-500/50 group-hover:text-red-500 font-tech">02</span>
                                                            <span>Observe respeito, paciência e clareza.</span>
                                                        </li>
                                                        <li className="flex gap-3 text-sm text-gray-400 group">
                                                            <span className="text-red-500/50 group-hover:text-red-500 font-tech">03</span>
                                                            <span>Avalie interesse genuíno na cidade.</span>
                                                        </li>
                                                    </ul>
                                                </div>

                                                {/* Finalization Card */}
                                                <div className="glass-panel p-6 rounded-2xl border-t-4 border-emerald-500 hover:border-emerald-400 transition-colors flex-1">
                                                    <h3 className="text-emerald-400 font-bold text-sm uppercase tracking-widest mb-4 flex items-center gap-2 font-tech">
                                                        <Icons.Check className="w-4 h-4"/> Finalização
                                                    </h3>
                                                    <ul className="space-y-4">
                                                        <li className="flex gap-3 text-sm text-gray-400 group">
                                                            <span className="text-emerald-500/50 group-hover:text-emerald-500 font-tech">01</span>
                                                            <span>Retorne nas perguntas erradas e explique.</span>
                                                        </li>
                                                        <li className="flex gap-3 text-sm text-gray-400 group">
                                                            <span className="text-emerald-500/50 group-hover:text-emerald-500 font-tech">02</span>
                                                            <span>Oriente sobre a liberação no canal #liberação.</span>
                                                        </li>
                                                        <li className="flex gap-3 text-sm text-gray-400 group">
                                                            <span className="text-emerald-500/50 group-hover:text-emerald-500 font-tech">03</span>
                                                            <span>Tire todas as dúvidas.</span>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>

                                        {/* Footer Action */}
                                        <div className="flex justify-end pt-4 border-t border-white/5">
                                            <button onClick={startInterview} className="btn-primary px-10 py-4 rounded-xl font-bold text-white flex items-center gap-3 text-sm tracking-[0.2em] uppercase font-tech shadow-lg shadow-red-900/20 hover:shadow-red-600/40 transition-all">
                                                Iniciar Procedimento <Icons.ChevronRight className="w-5 h-5" />
                                            </button>
                                        </div>
                                    </div>
                                )}

                                {/* TAB: INTRO */}
                                {activeTab === 'intro' && (
                                    <div className="grid grid-cols-1 md:grid-cols-12 gap-6 anim-fade-in">
                                        <div className="col-span-12 glass-panel p-8 rounded-2xl relative overflow-hidden group">
                                            <div className="absolute -top-10 -right-10 p-6 opacity-5 group-hover:opacity-10 transition-opacity duration-500"><Icons.User className="w-64 h-64" /></div>
                                            <h3 className="text-red-400 text-xs font-bold uppercase tracking-widest mb-4 flex items-center gap-2 relative z-10 font-tech"><Icons.User className="w-4 h-4"/> Script de Abertura</h3>
                                            <p className="text-xl md:text-2xl text-gray-200 font-light italic relative z-10 font-serif leading-relaxed">"{data.intro.script}"</p>
                                        </div>
                                        
                                        <div className="col-span-12 md:col-span-8 grid grid-cols-1 sm:grid-cols-12 gap-5">
                                            <div className="glass-panel p-5 rounded-2xl col-span-1 sm:col-span-12 delay-100 anim-fade-in">
                                                <label className="text-[10px] text-gray-400 font-bold block mb-2 uppercase tracking-widest font-tech">Nome Completo</label>
                                                <input type="text" className="w-full input-tech rounded-lg px-4 py-3" placeholder="Ex: Felipe Silva" value={candidateData.name} onChange={e => updateCandidate('name', e.target.value)} />
                                            </div>
                                            <div className="glass-panel p-5 rounded-2xl col-span-1 sm:col-span-12 delay-200 anim-fade-in">
                                                <label className="text-[10px] text-gray-400 font-bold block mb-2 uppercase tracking-widest font-tech">ID Discord</label>
                                                <input type="text" className="w-full input-tech rounded-lg px-4 py-3 font-mono" placeholder="Ex: 827364519203..." value={candidateData.id} onChange={e => updateCandidate('id', e.target.value)} />
                                            </div>
                                            <div className="glass-panel p-5 rounded-2xl col-span-1 sm:col-span-8 grid grid-cols-2 gap-4 delay-300 anim-fade-in">
                                                <div>
                                                    <label className="text-[10px] text-gray-400 font-bold block mb-2 uppercase tracking-widest font-tech">Data Nasc.</label>
                                                    <input type="text" className="w-full input-tech rounded-lg px-3 py-3 text-center" placeholder="00/00/0000" value={candidateData.dob} onChange={e => handleDobChange(e.target.value)} maxLength="10"/>
                                                </div>
                                                <div>
                                                    <label className="text-[10px] text-gray-400 font-bold block mb-2 uppercase tracking-widest font-tech">Idade</label>
                                                    <input type="number" className="w-full input-tech rounded-lg px-3 py-3 text-center" placeholder="00" value={candidateData.age} onChange={e => handleAgeChange(e.target.value)}/>
                                                </div>
                                            </div>
                                            <div className="glass-panel p-5 rounded-2xl col-span-1 sm:col-span-4 delay-300 anim-fade-in">
                                                <label className="text-[10px] text-gray-400 font-bold block mb-2 uppercase tracking-widest font-tech">Tempo de RP</label>
                                                <input type="text" className="w-full input-tech rounded-lg px-4 py-3" placeholder="Ex: 2 anos" value={candidateData.rpTime} onChange={e => updateCandidate('rpTime', e.target.value)} />
                                            </div>
                                        </div>
                                        
                                        <div className="col-span-12 md:col-span-4 flex flex-col gap-5 anim-fade-in delay-200">
                                            <div className="glass-panel p-5 rounded-2xl flex-1">
                                                <label className="text-[10px] text-gray-400 font-bold block mb-4 uppercase tracking-widest font-tech">Estilo de RP</label>
                                                <div className="flex flex-col gap-2">
                                                    {rpOptions.map((option) => (
                                                        <button key={option} onClick={() => updateCandidate('rpStyle', option)} className={`w-full py-3 px-4 rounded-lg text-sm font-medium text-left transition-all border flex justify-between items-center ${candidateData.rpStyle === option ? 'bg-red-600/20 border-red-500 text-white shadow-lg shadow-red-500/10' : 'bg-white/5 border-transparent text-gray-400 hover:bg-white/10 hover:text-white'}`}>
                                                            {option}
                                                            {candidateData.rpStyle === option && <Icons.Check className="w-4 h-4 text-red-500" />}
                                                        </button>
                                                    ))}
                                                </div>
                                            </div>
                                            <div className="glass-panel p-5 rounded-2xl space-y-4">
                                                {[{ label: 'Exp. em WL Fechada?', key: 'hasWlExp' }, { label: 'Leu as Regras?', key: 'readRules' }].map(opt => (
                                                    <div key={opt.key} className="flex justify-between items-center">
                                                        <span className="text-sm font-medium text-gray-300">{opt.label}</span>
                                                        <div className="flex bg-black/40 p-1 rounded-lg border border-white/5">
                                                            <button onClick={() => updateCandidate(opt.key, true)} className={`px-4 py-1.5 rounded-md text-xs font-bold transition-all ${candidateData[opt.key] === true ? 'bg-emerald-600 text-white shadow-lg' : 'text-gray-500 hover:text-white'}`}>SIM</button>
                                                            <button onClick={() => updateCandidate(opt.key, false)} className={`px-4 py-1.5 rounded-md text-xs font-bold transition-all ${candidateData[opt.key] === false ? 'bg-red-600 text-white shadow-lg' : 'text-gray-500 hover:text-white'}`}>NÃO</button>
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                        <div className="col-span-12 flex justify-end mt-4">
                                            <button onClick={() => setActiveTab('rules')} className="btn-primary px-12 py-4 rounded-xl font-bold text-white flex items-center gap-3 text-sm tracking-widest uppercase font-tech">
                                                Iniciar Perguntas <Icons.Check />
                                            </button>
                                        </div>
                                    </div>
                                )}

                                {/* TAB: RULES (Questions) */}
                                {activeTab === 'rules' && (
                                    <div className="grid grid-cols-1 md:grid-cols-12 gap-6 anim-fade-in">
                                        <div className="col-span-12 md:col-span-4 lg:col-span-3 space-y-6">
                                            <div className="glass-panel p-6 rounded-2xl border-l-4 border-red-500">
                                                <h3 className="text-red-400 text-xs font-bold uppercase tracking-widest mb-4 flex items-center gap-2 font-tech"><Icons.File /> Regras da Fase</h3>
                                                <p className="text-sm text-gray-300 leading-relaxed italic border-t border-white/5 pt-4">{data.rules.script}</p>
                                            </div>
                                            <div className="glass-panel p-6 rounded-2xl border-l-4 border-yellow-500 bg-yellow-500/5">
                                                <h3 className="text-yellow-500 text-xs font-bold uppercase tracking-widest mb-3 flex items-center gap-2 font-tech"><Icons.Info /> Atenção</h3>
                                                <p className="text-sm text-gray-300 leading-relaxed">O nervosismo não invalida a resposta técnica se o conceito estiver correto. Acalme o candidato se necessário.</p>
                                            </div>
                                        </div>
                                        
                                        <div className="col-span-12 md:col-span-8 lg:col-span-9 space-y-6">
                                            <div className="glass-panel rounded-2xl overflow-hidden anim-scale-in" key={questionStep}>
                                                <div className="px-6 py-5 border-b border-white/5 bg-white/[0.02] flex items-center gap-4">
                                                    <span className="bg-red-600 text-white shadow-lg shadow-red-600/20 text-xs font-bold px-3 py-1 rounded-md font-tech">
                                                        ETAPA {questionStep + 1} / {data.rules.groups.length}
                                                    </span>
                                                    <h3 className="font-bold text-white text-xl font-tech tracking-wide">{data.rules.groups[questionStep].title}</h3>
                                                </div>
                                                <div className="divide-y divide-white/5">
                                                    {data.rules.groups[questionStep].items.map((item, i) => (
                                                        <div key={item.id} className="p-6 hover:bg-white/[0.02] transition-colors relative group anim-fade-in" style={{animationDelay: `${i*0.1}s`}}>
                                                            <div className="flex flex-col md:flex-row justify-between items-start gap-6 mb-4">
                                                                <div className="flex-1">
                                                                    <p className="text-lg font-medium text-gray-100">{item.text}</p>
                                                                    {item.answer && (
                                                                        <div className="mt-4 text-sm text-gray-400 font-mono bg-black/40 p-4 rounded-lg border border-white/10 relative overflow-hidden">
                                                                            <div className="absolute top-0 left-0 w-1 h-full bg-red-500/50"></div>
                                                                            <span className="text-red-400 font-bold block mb-2 uppercase text-[10px] tracking-widest font-tech">Resposta Esperada</span>
                                                                            <span className="whitespace-pre-line leading-relaxed text-gray-300">{item.answer}</span>
                                                                        </div>
                                                                    )}
                                                                </div>
                                                                <div className="flex gap-3 shrink-0">
                                                                    <button onClick={() => handleAnswer(item.id, 'approved')} className={`w-12 h-12 rounded-xl flex items-center justify-center transition-all border ${answers[item.id] === 'approved' ? 'bg-emerald-600 border-emerald-500 text-white shadow-[0_0_20px_rgba(16,185,129,0.4)] scale-110' : 'bg-white/5 border-white/10 text-gray-600 hover:bg-white/10 hover:border-white/20 hover:text-white'}`}><Icons.Check className="w-6 h-6" /></button>
                                                                    <button onClick={() => handleAnswer(item.id, 'rejected')} className={`w-12 h-12 rounded-xl flex items-center justify-center transition-all border ${answers[item.id] === 'rejected' ? 'bg-red-600 border-red-500 text-white shadow-[0_0_20px_rgba(239,68,68,0.4)] scale-110' : 'bg-white/5 border-white/10 text-gray-600 hover:bg-white/10 hover:border-white/20 hover:text-white'}`}><Icons.X className="w-6 h-6" /></button>
                                                                </div>
                                                            </div>
                                                            <div className="mt-4">
                                                                <input type="text" className="w-full input-tech rounded-lg px-4 py-3 text-sm placeholder-gray-600" placeholder="Observações opcionais sobre esta resposta..." value={notes[item.id] || ''} onChange={(e) => handleNote(item.id, e.target.value)} />
                                                            </div>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                            
                                            <div className="flex justify-between pt-6">
                                                {questionStep > 0 ? (
                                                    <button onClick={() => setQuestionStep(prev => prev - 1)} className="btn-ghost px-8 py-3 rounded-xl font-bold text-white text-sm tracking-widest uppercase flex items-center gap-3 hover:-translate-x-1 transition-transform font-tech">
                                                        <span className="rotate-180"><Icons.ChevronRight className="w-4 h-4"/></span> Anterior
                                                    </button>
                                                ) : <div></div>}
                                                
                                                {questionStep < data.rules.groups.length - 1 ? (
                                                    <button onClick={() => setQuestionStep(prev => prev + 1)} className="btn-primary px-10 py-3 rounded-xl font-bold text-white flex items-center gap-3 text-sm tracking-widest uppercase hover:translate-x-1 transition-transform font-tech">
                                                        Próxima Etapa <Icons.ChevronRight className="w-4 h-4" />
                                                    </button>
                                                ) : (
                                                    <button onClick={() => setActiveTab('result')} className="btn-primary px-12 py-4 rounded-xl font-bold text-white flex items-center gap-3 text-sm tracking-widest uppercase font-tech shadow-xl shadow-red-600/20">
                                                        Ver Resultados <Icons.Shield />
                                                    </button>
                                                )}
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {/* TAB: RESULT (Redesigned) */}
                                {activeTab === 'result' && (
                                    <div className="grid grid-cols-1 md:grid-cols-12 gap-8 anim-fade-in">
                                        <div className="col-span-12 md:col-span-5 flex flex-col gap-6">
                                            {/* Status Card Big */}
                                            <div className={`glass-panel p-10 rounded-2xl relative overflow-hidden transition-all duration-700 anim-scale-in flex flex-col items-center justify-center text-center ${passed ? 'glow-success' : 'glow-danger'}`}>
                                                <div className={`absolute inset-0 opacity-20 ${passed ? 'bg-gradient-to-b from-green-500 to-transparent' : 'bg-gradient-to-b from-red-500 to-transparent'}`}></div>
                                                
                                                <div className={`relative z-10 w-24 h-24 rounded-full flex items-center justify-center text-5xl mb-6 shadow-2xl border-4 ${passed ? 'bg-emerald-600 border-emerald-400 text-white' : 'bg-red-600 border-red-400 text-white'}`}>
                                                    {passed ? <Icons.Check /> : <Icons.X />}
                                                </div>
                                                
                                                <h2 className="relative z-10 text-5xl font-bold tracking-tight text-white mb-2 font-tech drop-shadow-md">
                                                    {passed ? 'APROVADO' : 'REPROVADO'}
                                                </h2>
                                                
                                                <p className="relative z-10 text-gray-300 uppercase tracking-widest text-xs mb-6 font-tech opacity-80">Resultado da Entrevista</p>
                                                
                                                <div className="w-full bg-black/40 p-4 rounded-xl border border-white/10 relative z-10 backdrop-blur-md">
                                                    <div className="flex justify-between items-center text-sm font-mono text-gray-400 mb-2">
                                                        <span>ACERTOS</span>
                                                        <span className="text-white font-bold">{stats.correct} / {stats.total}</span>
                                                    </div>
                                                    <ProgressBar percentage={stats.score} passed={passed} />
                                                </div>
                                            </div>

                                            <div className="glass-panel p-1 rounded-2xl anim-fade-in delay-200">
                                                <div className="bg-[#0a0a0a]/80 p-5 rounded-t-xl border-b border-white/5">
                                                    <h4 className="text-gray-400 font-bold uppercase text-[10px] tracking-widest flex items-center gap-2 mb-3 font-tech"><Icons.File className="w-3 h-3 text-red-500" /> Observações Finais</h4>
                                                    <textarea className="w-full h-32 bg-transparent text-white outline-none resize-none placeholder-gray-600 text-sm leading-relaxed custom-scroll" placeholder="Digite aqui o feedback final para ser registrado..." value={finalObservation} onChange={(e) => setFinalObservation(e.target.value)}></textarea>
                                                </div>
                                                <button onClick={copyFormattedReport} className="w-full py-4 rounded-b-xl font-bold text-white bg-white/5 hover:bg-white/10 transition-all flex items-center justify-center gap-2 hover:text-red-400 uppercase text-xs tracking-widest font-tech border-t border-white/5">
                                                    <Icons.Copy className="w-4 h-4" /> Copiar Relatório
                                                </button>
                                            </div>
                                        </div>
                                        
                                        <div className="col-span-12 md:col-span-7 space-y-6">
                                            <div className={`glass-panel p-8 rounded-2xl border-l-4 anim-fade-in delay-100 ${passed ? 'border-l-emerald-500 bg-emerald-500/5' : 'border-l-red-500 bg-red-500/5'}`}>
                                                <h3 className={`${passed ? 'text-emerald-400' : 'text-red-400'} text-xs font-bold uppercase tracking-widest mb-4 flex items-center gap-2 font-tech`}><Icons.User /> Script de Encerramento</h3>
                                                <p className="text-xl text-gray-100 font-light italic leading-relaxed font-serif">"{passed ? data.result.passScript : data.result.failScript}"</p>
                                            </div>
                                            
                                            {passed && (
                                                <div className="glass-panel p-8 rounded-2xl anim-fade-in delay-200">
                                                    <div className="flex items-center gap-3 mb-6 border-b border-white/10 pb-4">
                                                        <div className="p-2 bg-yellow-500/10 rounded-lg text-yellow-500"><Icons.Alert className="w-5 h-5" /></div>
                                                        <h3 className="text-lg font-bold text-white tracking-tight font-tech">Orientações Obrigatórias</h3>
                                                    </div>
                                                    <div className="grid grid-cols-1 gap-4">
                                                        {data.result.guidelines.map((guide, idx) => (
                                                            <div key={idx} className="bg-white/[0.02] hover:bg-white/[0.05] p-4 rounded-xl border border-white/5 transition-colors group flex gap-4 items-start">
                                                                <span className="mt-1.5 w-1.5 h-1.5 bg-red-500 rounded-full shrink-0 shadow-[0_0_10px_red]"></span>
                                                                <div>
                                                                    <h4 className="text-gray-200 font-bold text-xs uppercase mb-1 font-tech group-hover:text-red-400 transition-colors">{guide.title}</h4>
                                                                    <p className="text-gray-400 text-xs leading-relaxed font-light">{guide.text}</p>
                                                                </div>
                                                            </div>
                                                        ))}
                                                    </div>
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    </main>
                    
                    <Toast message={toast.msg} isVisible={toast.show} onClose={() => setToast({ ...toast, show: false })} />
                    <ConfirmModal isOpen={showResetModal} onClose={() => setShowResetModal(false)} onConfirm={handleResetConfirm} />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<Dashboard />);
    </script>
</body>
</html>